{"ast":null,"code":"import _slicedToArray from\"D:/rentup/rentup_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Page from\"../common/Page\";import classes from\"./RentRegisterPage.module.css\";import RecentCard from\"../HomePage/Recent/RecentCard\";import LandlordCard from\"../HomePage/landlord/LandlordCard\";import Back from\"../common/Back/Back\";import{getRoomByRoomId}from\"../../../api/RoomApi\";import{createRentRequest}from\"../../../api/RentRequestApi\";import{useState,useEffect,useContext,useRef}from\"react\";import AuthContext from'../../../store/auth-context';import{useParams}from'react-router-dom';import img from\"../../../assets/img/backgroundPost.jpg\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RentRegisterPage=function RentRegisterPage(){var history=useHistory();var params=useParams();var id=params.id;var authCtx=useContext(AuthContext);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),landlord=_useState4[0],setLandlord=_useState4[1];var messageInputRef=useRef();useEffect(function(){getRoomByRoomId(id).then(function(data){setPost({room_id:data.id,room_name:data.name,cover:data.image,category:data.category.name,city:data.house.city,district:data.house.district,ward:data.house.ward,totalPrice:data.totalPrice});setLandlord({cover:data.house.landlord.image,name:data.house.landlord.username,address:data.house.landlord.city+' - '+data.house.landlord.district+' - '+data.house.landlord.ward,phone:data.house.landlord.phone,linkfb:data.house.landlord.linkfb,linkin:data.house.landlord.linkin,linktw:data.house.landlord.linktw,linkli:data.house.landlord.linkli});}).catch(function(err){alert(err.message);});},[]);var sendRequest=function sendRequest(){var data={room:id,message:messageInputRef.current.value};createRentRequest(data,authCtx.token).then(function(data){history.replace(\"/manage/your_request\");}).catch(function(err){alert(err.message);});};return/*#__PURE__*/_jsx(Page,{children:/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(Back,{name:\"Rent Register\",title:\"Your Rent Register\",cover:img}),/*#__PURE__*/_jsx(\"section\",{className:\"\".concat(classes.recent,\" \").concat(classes.padding),children:/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(classes.grid1,\" \").concat(classes.mtop),children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(classes.shadow,\" \").concat(classes.rentRequestCard),children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.rentRequestCard_info,children:[/*#__PURE__*/_jsx(RecentCard,{item:post}),/*#__PURE__*/_jsx(LandlordCard,{item:landlord})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.rentRequestCard_message,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Message:\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",ref:messageInputRef})]}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(classes.rentRequestCard_action),children:/*#__PURE__*/_jsx(\"button\",{onClick:sendRequest,children:\"Send\"})})]},id)})})})]})});};export default RentRegisterPage;","map":{"version":3,"names":["Page","classes","RecentCard","LandlordCard","Back","getRoomByRoomId","createRentRequest","useState","useEffect","useContext","useRef","AuthContext","useParams","img","useHistory","RentRegisterPage","history","params","id","authCtx","post","setPost","landlord","setLandlord","messageInputRef","then","data","room_id","room_name","name","cover","image","category","city","house","district","ward","totalPrice","username","address","phone","linkfb","linkin","linktw","linkli","catch","err","alert","message","sendRequest","room","current","value","token","replace","recent","padding","container","grid1","mtop","shadow","rentRequestCard","rentRequestCard_info","rentRequestCard_message","rentRequestCard_action"],"sources":["D:/rentup/rentup_frontend/src/core/components/RentRegisterPage/RentRegisterPage.js"],"sourcesContent":["import Page from \"../common/Page\"\r\nimport classes from \"./RentRegisterPage.module.css\"\r\nimport RecentCard from \"../HomePage/Recent/RecentCard\";\r\nimport LandlordCard from \"../HomePage/landlord/LandlordCard\"\r\nimport Back from \"../common/Back/Back\"\r\nimport {getRoomByRoomId} from \"../../../api/RoomApi\"\r\nimport {createRentRequest} from \"../../../api/RentRequestApi\"\r\nimport { useState, useEffect, useContext, useRef } from \"react\"\r\nimport AuthContext from '../../../store/auth-context';\r\nimport { useParams } from 'react-router-dom';\r\nimport img from \"../../../assets/img/backgroundPost.jpg\"\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nconst RentRegisterPage = () => {\r\n    const history = useHistory()\r\n    \r\n    const params = useParams()\r\n\r\n    const id = params.id\r\n    \r\n    const authCtx = useContext(AuthContext)\r\n    \r\n    const [post, setPost] = useState({})\r\n    const [landlord, setLandlord] = useState({})\r\n    const messageInputRef = useRef()\r\n    \r\n    useEffect(() => {\r\n        getRoomByRoomId(id)\r\n        .then((data) => {\r\n            setPost({\r\n                room_id: data.id,\r\n                room_name: data.name,\r\n                cover: data.image,\r\n                category: data.category.name,\r\n                city: data.house.city,\r\n                district: data.house.district,\r\n                ward: data.house.ward,\r\n                totalPrice: data.totalPrice\r\n            })\r\n            setLandlord({\r\n                cover: data.house.landlord.image,\r\n                name: data.house.landlord.username,\r\n                address: data.house.landlord.city + ' - ' + data.house.landlord.district + ' - ' + data.house.landlord.ward,\r\n                phone: data.house.landlord.phone,\r\n                linkfb: data.house.landlord.linkfb,\r\n                linkin: data.house.landlord.linkin,\r\n                linktw: data.house.landlord.linktw,\r\n                linkli: data.house.landlord.linkli,\r\n            })\r\n        })\r\n        .catch((err) => {\r\n                alert(err.message);\r\n        });\r\n    }, [])\r\n    \r\n    const sendRequest = () => {\r\n        const data = {\r\n            room: id,\r\n            message: messageInputRef.current.value,\r\n        }\r\n        \r\n        createRentRequest(data, authCtx.token)\r\n        .then(data => {\r\n            history.replace(\"/manage/your_request\")\r\n        })\r\n        .catch((err) => {\r\n            alert(err.message);\r\n        });\r\n    }\r\n    \r\n    return (\r\n        <Page>\r\n            <section>\r\n                <Back name='Rent Register' title='Your Rent Register' cover={img}/>\r\n                <section className={`${classes.recent} ${classes.padding}`}>\r\n                    <div className={classes.container}>\r\n                        <div className={`${classes.grid1} ${classes.mtop}`}>\r\n                            <div className={`${classes.shadow} ${classes.rentRequestCard}`} key={id}>\r\n                                <div className={classes.rentRequestCard_info}>\r\n                                    <RecentCard item={post}/>\r\n                                    <LandlordCard item={landlord}/>\r\n                                </div>\r\n                                <div className={classes.rentRequestCard_message}>\r\n                                    <h2>Message:</h2>\r\n                                    <textarea type=\"text\" ref={messageInputRef}/>\r\n                                </div>\r\n                                <div className={`${classes.rentRequestCard_action}`}>\r\n                                    <button onClick={sendRequest}>Send</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </section>\r\n        </Page>\r\n    )\r\n}\r\n\r\nexport default RentRegisterPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}